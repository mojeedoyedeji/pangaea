(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{160:function(t,e,n){},161:function(t,e,n){},185:function(t,e,n){"use strict";n.r(e);var r=n(55),a=n(0),c=n.n(a),i=n(14),o=n.n(i),s=(n(160),n(22)),d=(n(145),n.p,n(31)),j=Object(d.a)(),u=(n(161),n(16)),l=n(253),b=n(245),O=n(103),h=n(21),g=n(244),m=n(230),p=Object(m.a)((function(t){return{root:{flexGrow:1,width:"100%",minHeight:"110vh",position:"relative",top:0,bottom:0,left:0,right:0,background:"#F8F6FB",paddingBottom:40},backdrop:{zIndex:t.zIndex.drawer+1,color:"#fff"},buttonText:{fontFamily:"Sen",textTransform:"none"},header:{fontFamily:"Poppins",textTransform:"none"},subheader:{fontFamily:"Poppins",textTransform:"none",fontSize:25},avatarLarge:{width:100,height:100,marginBottom:-50,borderWidth:5,borderColor:"#2B2D42"}}})),f=n(87),x=n(49),y=n(6),v=n(38),w=n(252),C=n(243),S=n(241),q=n(236),F=n(233),T=n(239),k=n(140),I=n.n(k),N=n(141),B=n.n(N),R=n(76),D=n(237),_=n(238),P=n(251),E=n(240),A=n(246),H=n(250),L=n(137),M=n.n(L),W=n(138),z=n.n(W),J=n(139),$=n.n(J),G=n(34),V="SET_CART";function Q(t){return{type:V,payload:t}}var U="INITIALIZE",Y="FIX_CURRENCY";var X,Z,K=n(74),tt=n.n(K),et=n(5),nt=Object(G.gql)(X||(X=Object(r.a)(['\n  query {\n    __type(name:"Currency"){\n    name\n    enumValues{\n      name\n    }\n  }\n}\n']))),rt=(Object(G.gql)(Z||(Z=Object(r.a)(["\n  query Products($currency: Currency){\n    products{\n    id\n    title\n    image_url\n    price(currency: $currency)\n  }\n}\n"]))),{card:{marginTop:10}});function at(){var t=Object(u.b)(),e=Object(G.useQuery)(nt).data,n=Object(a.useState)(Object(u.c)((function(t){return t.main.currency}))),r=Object(x.a)(n,2),c=r[0],i=r[1],o=Object(u.c)((function(t){return t.products.products})),d=Object(u.c)((function(t){return t.cart.cart})),j=[];e&&(j=e.__type.enumValues),Object(a.useEffect)((function(){!function(){for(var e=d,n=d,r=0;r<e.length;r++){var a=e[r];n=n.filter((function(t){return t.id!==a.id})),console.log(n.length);var c=o.find((function(t){return t.id===a.id})),i=Object(s.a)(Object(s.a)({},c),{},{quantity:a.quantity,total:c.price*a.quantity});n=[].concat(Object(R.a)(n),[i])}t(Q(n))}()}),[o]);return Object(et.jsxs)("div",{style:{padding:10},children:[Object(et.jsx)(F.a,{container:!0,direction:"row",children:Object(et.jsx)(A.a,{id:"select",style:{width:"30%"},onChange:function(e){var n;i(e.target.value),t((n=e.target.value,{type:Y,payload:n}))},label:"Currency",value:c,select:!0,children:j.map((function(t){return Object(et.jsxs)(H.a,{value:t.name,children:[" ",t.name," "]})}))})}),Object(et.jsxs)("div",{style:{marginTop:20},children:[0===d.length&&Object(et.jsx)(F.a,{container:!0,direction:"row",children:Object(et.jsx)(q.a,{children:"No items in this cart"})}),d.map((function(t){return Object(et.jsx)(ct,{data:t})}))]}),Object(et.jsx)(it,{})]})}function ct(t){var e=Object(u.c)((function(t){return t.cart.cart})),n=Object(u.c)((function(t){return t.main.currency})),r=Object(u.b)(),a=rt;return Object(et.jsx)(D.a,{style:a.card,children:Object(et.jsxs)(_.a,{children:[Object(et.jsxs)(F.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",children:[Object(et.jsx)(F.a,{item:!0,md:10,children:Object(et.jsxs)(q.a,{children:[t.data.title," "]})}),Object(et.jsx)(F.a,{item:!0,md:1,children:Object(et.jsx)(T.a,{onClick:function(){return function(t){var n=e.filter((function(e){return e.id!=t.id}));r(Q(n))}(t.data)},children:Object(et.jsx)(M.a,{})})})]}),Object(et.jsxs)(F.a,{container:!0,spacing:1,direction:"row",justify:"space-between",children:[Object(et.jsx)(F.a,{item:!0,md:4,children:Object(et.jsxs)(F.a,{spacing:1,container:!0,direction:"row",alignItems:"center",children:[Object(et.jsx)(F.a,{item:!0,children:Object(et.jsxs)(T.a,{onClick:function(){return function(t){var n=e.map((function(e){return e.id===t.id?Object(s.a)(Object(s.a)({},e),{},{quantity:e.quantity+1,total:(e.quantity+1)*e.price}):e}));r(Q(n))}(t.data)},children:[" ",Object(et.jsx)(z.a,{})]})}),Object(et.jsx)(F.a,{item:!0,children:Object(et.jsxs)(q.a,{variant:"body1",children:[" ",t.data.quantity]})}),Object(et.jsx)(F.a,{item:!0,children:Object(et.jsxs)(T.a,{onClick:function(){return function(t){var n=e.map((function(e){return e.id===t.id?Object(s.a)(Object(s.a)({},e),{},{quantity:Math.max(e.quantity-1,1),total:Math.max(e.quantity-1,1)*e.price}):e}));r(Q(n))}(t.data)},children:[" ",Object(et.jsx)($.a,{})]})})]})}),Object(et.jsx)(F.a,{item:!0,md:1,children:Object(et.jsxs)(q.a,{variant:"h6",children:[" ",tt()(n),t.data.total," "]})}),Object(et.jsx)(F.a,{item:!0,md:3,children:Object(et.jsx)(P.a,{src:t.data.image_url,variant:"square"})})]})]})})}function it(){var t=Object(u.c)((function(t){return t.cart.cart})),e=Object(u.c)((function(t){return t.main.currency}));return Object(et.jsxs)("div",{style:{marginTop:100},children:[Object(et.jsx)(E.a,{}),Object(et.jsx)("div",{style:{marginTop:20},children:Object(et.jsxs)(q.a,{variant:"h6",children:[" Sub total: ",tt()(e)," ",function(){for(var e=0,n=0;n<t.length;n++)e+=Number(t[n].total);return e}()]})}),Object(et.jsx)("div",{style:{marginTop:40},children:Object(et.jsx)(S.a,{color:"primary",style:{width:"100%"},variant:"contained",children:Object(et.jsx)(q.a,{variant:"h6",style:{textTransform:"none"},children:"Proceed to Checkout"})})})]})}var ot,st=n(242),dt=(n(3),"FETCH_PRODUCT");var jt=Object(m.a)({card:{height:280,background:"#F8F6FB",position:"relative"},media:{height:240,width:120},img:{display:"block",maxWidth:"100%",maxHeight:120,width:"auto",height:"auto"}}),ut=Object(G.gql)(ot||(ot=Object(r.a)(["\n  query Products($currency: Currency){\n    products{\n    id\n    title\n    image_url\n    price(currency: $currency)\n  }\n}\n"])));function lt(){var t,e=Object(u.c)((function(t){return t.main.currency})),n=Object(G.useQuery)(ut,{variables:{currency:e}}).data,r=Object(u.c)((function(t){return t.products.products})),a=(Object(u.c)((function(t){return t.cart.cart})),Object(u.b)());return n&&a((t=n.products,{type:dt,payload:t})),Object(et.jsx)("div",{children:Object(et.jsx)(F.a,{container:!0,direction:"row",spacing:2,children:r.map((function(t){return Object(et.jsx)(F.a,{item:!0,md:4,sm:6,xs:12,children:Object(et.jsx)(bt,{data:t})})}))})})}function bt(t){var e=jt(),n=Object(u.b)(),r=Object(u.c)((function(t){return t.cart.cart})),a=Object(u.c)((function(t){return t.main.currency}));return Object(et.jsxs)(D.a,{elevation:0,className:e.card,children:[Object(et.jsxs)(_.a,{children:[Object(et.jsx)(F.a,{container:!0,direction:"row",justify:"center",style:{marginTop:10},children:Object(et.jsx)(F.a,{item:!0,md:4,children:Object(et.jsx)("img",{className:e.img,src:t.data.image_url})})}),Object(et.jsx)(q.a,{style:{marginTop:10},align:"center",gutterBottom:!0,variant:"h5",component:"h2",children:t.data.title}),Object(et.jsxs)(q.a,{style:{marginTop:10},align:"center",variant:"body2",color:"textSecondary",component:"p",children:["From ",tt()(a)," ",t.data.price]})]}),Object(et.jsx)(st.a,{style:{position:"absolute",bottom:0,width:"100%"},children:Object(et.jsx)(F.a,{container:!0,direction:"row",justify:"center",children:Object(et.jsx)(S.a,{onClick:function(){return function(t){var e=r.find((function(e){return e.id===t.id}));if(e){var a=r.filter((function(t){return t.id!=e.id})),c=Object(s.a)(Object(s.a)({},e),{},{quantity:e.quantity+1,total:(e.quantity+1)*e.price});a.push(c),n(Q(a))}else c=Object(s.a)(Object(s.a)({},t),{},{quantity:1,total:t.price}),a=[].concat(Object(R.a)(r),[c]),console.log(a),n(Q(a))}(t.data)},variant:"contained",color:"primary",children:Object(et.jsx)(q.a,{variant:"h6",style:{textTransform:"none"},children:"Add to Cart"})})})})]})}var Ot=480,ht=Object(m.a)((function(t){return{root:{display:"flex"},appBar:{transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(Ot,"px)"),marginLeft:Ot,transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})},menuButton:{marginRight:t.spacing(2)},hide:{display:"none"},drawer:{width:Ot,flexShrink:0},drawerPaper:{width:Ot},drawerHeader:Object(s.a)(Object(s.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginRight:-480},contentShift:{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginRight:0}}}));function gt(){var t=ht(),e=(p(),Object(v.a)()),n=(Object(u.b)(),c.a.useState(!0)),r=Object(x.a)(n,2),a=r[0],i=r[1];Object(u.c)((function(t){return t.main.content})),Object(h.g)();return Object(et.jsxs)("div",{className:t.root,children:[Object(et.jsx)(C.a,{}),Object(et.jsxs)("main",{className:Object(y.a)(t.content,Object(f.a)({},t.contentShift,a)),children:[Object(et.jsx)("div",{className:t.drawerHeader}),Object(et.jsx)(F.a,{container:!0,direction:"row",justify:"flex-end",style:{marginTop:10,marginBottom:30},children:Object(et.jsxs)(S.a,{onClick:function(){return i(!0)},children:[" ",Object(et.jsx)(q.a,{children:" View Cart "})," "]})}),Object(et.jsx)(lt,{})]}),Object(et.jsxs)(w.a,{className:t.drawer,variant:"persistent",anchor:"right",open:a,classes:{paper:t.drawerPaper},children:[Object(et.jsx)("div",{className:t.drawerHeader,children:Object(et.jsxs)(F.a,{container:!0,direction:"row",alignItems:"center",children:[Object(et.jsx)(F.a,{item:!0,md:2,children:Object(et.jsx)(T.a,{onClick:function(){i(!1)},children:"rtl"===e.direction?Object(et.jsx)(I.a,{}):Object(et.jsx)(B.a,{})})}),Object(et.jsx)(F.a,{item:!0,md:3,children:Object(et.jsx)(q.a,{variant:"h6",children:" My Cart"})})]})}),Object(et.jsx)(at,{})]})]})}var mt=n(144),pt=Object(mt.a)({typography:{fontFamily:'"Sen", sans-serif',fontSize:12,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,fontWeightBold:700},palette:{primary:{main:"#04773b"}}}),ft=n(249),xt=n(248),yt=Object(m.a)({success:{backgroundColor:"#D8F0D1",borderRadius:3,padding:10},warning:{backgroundColor:"#FFDCAD",borderRadius:3,padding:10},error:{backgroundColor:"#FDD8DE",borderRadius:3,padding:10},successText:{color:"#59B93C",fontFamily:"Roboto"},warningText:{color:"#E07F00",fontFamily:"Roboto"},errorText:{color:"#D50B2D",fontFamily:"Roboto"}});function vt(){var t=c.a.useState(!0),e=Object(x.a)(t,2),n=(e[0],e[1]),r=Object(u.b)(),a=Object(u.c)((function(t){return t.main.notify})),i=(yt(),function(t,e){var a;"clickaway"!==e&&(n(!1),r({type:"CLEAR_NOTIFY",payload:a}))});return Object(et.jsx)(ft.a,{open:a.message,autoHideDuration:6e3,onClose:i,children:Object(et.jsx)(xt.a,{onClose:i,severity:a.status,children:a.message})})}var wt=function(){var t=Object(u.c)((function(t){return t.main.loading})),e=(Object(u.c)((function(t){return t.user})),p());return Object(et.jsx)(g.a,{theme:pt,children:Object(et.jsx)(O.a,{history:j,children:Object(et.jsxs)("div",{children:[Object(et.jsx)(l.a,{className:e.backdrop,open:t,children:Object(et.jsx)(b.a,{color:"inherit"})}),Object(et.jsx)(vt,{}),Object(et.jsx)(h.d,{children:Object(et.jsx)(h.b,{exact:!0,path:"/",component:gt})})]})})})},Ct=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,254)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))},St=n(57),qt={products:[],product:{}};var Ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case dt:return Object.assign({},t,{products:e.payload})}return t},Tt={cart:[]};var kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case V:return Object.assign({},t,{cart:e.payload})}return t},It={loading:!1,notify:{message:"",status:""},page:2,currency:"NGN"};var Nt=Object(St.c)({main:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case U:return Object.assign({},t,{loading:!1,loggedIn:!1});case Y:return Object.assign({},t,{currency:e.payload})}return t},products:Ft,cart:kt}),Bt=n(142),Rt=n.n(Bt),Dt=n(143);var _t=function(){try{var t=localStorage.getItem("state");if(null===t)return;return JSON.parse(t)}catch(e){return}}(),Pt=Object(St.d)(Nt,_t,Object(St.a)(Dt.a));Pt.subscribe(Rt()((function(){!function(t){try{var e=JSON.stringify(t);localStorage.setItem("state",e)}catch(n){console.log(n)}}({main:Pt.getState().main,products:Pt.getState().products,cart:Pt.getState().cart})}),1e3));var Et,At=Pt,Ht=new G.ApolloClient({uri:"https://pangaea-interviews.now.sh/api/graphql",cache:new G.InMemoryCache});Ht.query({query:Object(G.gql)(Et||(Et=Object(r.a)(["\n      query {\n        products{\n          id\n          title\n          image_url\n        }\n      }\n    "])))}).then((function(t){})),o.a.render(Object(et.jsx)(c.a.StrictMode,{children:Object(et.jsx)(G.ApolloProvider,{client:Ht,children:Object(et.jsx)(u.a,{store:At,children:Object(et.jsx)(wt,{})})})}),document.getElementById("root")),Ct()}},[[185,1,2]]]);
//# sourceMappingURL=main.daa8afd9.chunk.js.map